#spring.application.name=api-gateway
#
##server.port=8089
##eureka.client.service-url.default-zone=${EUREKA_URL:http://localhost:8761/eureka/}
#spring.main.web-application-type=reactive
#
#logging.level.root=INFO
#logging.level.org.springframework.cloud.gateway=DEBUG
#logging.level.reactor.netty=DEBUG
#logging.level.org.springframework.web=DEBUG
#logging.level.org.springframework.security=DEBUG
#
#
#eureka.client.serviceUrl.defaultZone=https://eureka-service-registry.railway.app/eureka/
#eureka.instance.preferIpAddress=true


spring.application.name=api-gateway
server.port=${PORT}
spring.main.web-application-type=reactive

# ========== НАСТРОЙКИ EUREKA (ОБЯЗАТЕЛЬНЫЕ) ==========
eureka.client.serviceUrl.defaultZone=https://eureka-service-registry.railway.app/eureka/
eureka.instance.hostname=api-gateway.railway.app
eureka.instance.preferIpAddress=false

# Настройки HTTPS для Railway
eureka.instance.non-secure-port-enabled=false
eureka.instance.secure-port-enabled=true
eureka.instance.secure-port=443

# URL для health-check
eureka.instance.status-page-url=https://${eureka.instance.hostname}/actuator/health
eureka.instance.health-check-url=https://${eureka.instance.hostname}/actuator/health
eureka.instance.home-page-url=https://${eureka.instance.hostname}/

# ========== НАСТРОЙКИ МАРШРУТИЗАЦИИ ==========
spring.cloud.gateway.discovery.locator.enabled=true
spring.cloud.gateway.discovery.locator.lower-case-service-id=true


spring.cloud.gateway.routes[0].id=test-methods-service
spring.cloud.gateway.routes[0].uri=lb://test-methods-service
spring.cloud.gateway.routes[0].predicates[0]=Path=/all/**

spring.cloud.gateway.routes[1].id=test-methods-service
spring.cloud.gateway.routes[1].uri=lb://test-methods-service
spring.cloud.gateway.routes[1].predicates[0]=Path=/user/**

spring.cloud.gateway.routes[11].id=microservices-auth
spring.cloud.gateway.routes[11].uri=lb://microservices-auth
spring.cloud.gateway.routes[11].predicates[0]=Path=/test/**



spring.cloud.gateway.routes[2].id=test-methods-service
spring.cloud.gateway.routes[2].uri=lb://test-methods-service
spring.cloud.gateway.routes[2].predicates[0]=Path=/admin/**

spring.cloud.gateway.routes[3].id=test-methods-service
spring.cloud.gateway.routes[3].uri=lb://test-methods-service
spring.cloud.gateway.routes[3].predicates[0]=Path=/test/**

spring.cloud.gateway.routes[4].id=microservices-auth
spring.cloud.gateway.routes[4].uri=lb://microservices-auth
spring.cloud.gateway.routes[4].predicates[0]=Path=/register/user/**

spring.cloud.gateway.routes[5].id=microservices-auth
spring.cloud.gateway.routes[5].uri=lb://microservices-auth
spring.cloud.gateway.routes[5].predicates[0]=Path=/authenticate/**

#spring.cloud.gateway.routes[0].id=test-methods-service
#spring.cloud.gateway.routes[0].uri=http://localhost:8091
#spring.cloud.gateway.routes[0].predicates[0]=Path=/all/**
#
#spring.cloud.gateway.routes[1].id=test-methods-service
#spring.cloud.gateway.routes[1].uri=http://localhost:8091
#spring.cloud.gateway.routes[1].predicates[0]=Path=/user/**
#
#spring.cloud.gateway.routes[2].id=test-methods-service
#spring.cloud.gateway.routes[2].uri=http://localhost:8091
#spring.cloud.gateway.routes[2].predicates[0]=Path=/admin/**
#
#spring.cloud.gateway.routes[3].id=test-methods-service
#spring.cloud.gateway.routes[3].uri=http://localhost:8091
#spring.cloud.gateway.routes[3].predicates[0]=Path=/test/**
#
#spring.cloud.gateway.routes[4].id=microservices-auth
#spring.cloud.gateway.routes[4].uri=http://localhost:8082
#spring.cloud.gateway.routes[4].predicates[0]=Path=/register/user/**
#
#spring.cloud.gateway.routes[5].id=microservices-auth
#spring.cloud.gateway.routes[5].uri=http://localhost:8082
#spring.cloud.gateway.routes[5].predicates[0]=Path=/authenticate/**
#
#

